<template name="messages">

    <div class="main-container nav-offset">

        <!--<nav>-->
            <!--<ul class="right hide-on-med-and-down">-->
                <!--<li><a href="#!">First Sidebar Link</a></li>-->
                <!--<li><a href="#!">Second Sidebar Link</a></li>-->
            <!--</ul>-->
            <!--<ul id="slide-out" class="side-nav">-->
                <!--<li><a href="#!">First Sidebar Link</a></li>-->
                <!--<li><a href="#!">Second Sidebar Link</a></li>-->
            <!--</ul>-->
            <!--<a href="#" data-activates="slide-out" class="button-collapse"><i class="mdi-navigation-menu"></i></a>-->
        <!--</nav>-->


        <div class="message-user-link-container">
            {{#each getMessageSendersForCurrentUser}}
                <div class="message-user-link" data-id="{{this}}">
                    {{> userImage userId=this }}
                    <!--{{> simpleUserInfoById userId=this}}-->
                    <div class="message-text break">
                        <STRONG>{{getUsername userId=this}}</STRONG>
                        {{#each getLatestMessageFrom this}}
                            <small>{{formatTime this.createdTime}}:</small>
                            <span>{{this.message}}</span>
                        {{/each}}
                    </div>

                </div>

            {{/each}}
        </div>

        <div class="message-area">
            {{#each getMessage}}
                {{> messageEntry message=this}}
            {{/each}}
        </div>
    </div>


</template>


<template name="userImage">
    <div class="userImage-holder" data-id="{{userId}}">
        <a href="#" data-id="{{userId}}">
            <div class="avatar avatar-circle" data-id="{{userId}}">
                {{#if getPhotoUrlById userId}}
                    <img class="avatar-image" src="{{getPhotoUrlById userId}}" alt="avatar" data-id="{{userId}}">
                {{else}}
                    <img class="avatar-image" src="{{identicon userId}}" alt="avatar" data-id="{{userId}}">
                {{/if}}
            </div>
        </a>
    </div>
</template>



<template name="messageEntry">

    <div class="message-container">
        <div class="img-holder">
            {{> userImage userId=message.senderId}}
        </div>
        <div class="message-text">
            <strong>{{getUsernameById message.senderId}}</strong>
            <small>{{formatTime message.createdTime}}:</small>
            <span>{{message.message}}</span>


            <!--<span>{{message.message}}</span>-->
            <!--<p>{{message._id}}</p>-->
        </div>
    </div>

</template>

