<template name="messages">

    <div class="main-container nav-offset">

        <!--<nav>-->
            <!--<ul class="right hide-on-med-and-down">-->
                <!--<li><a href="#!">First Sidebar Link</a></li>-->
                <!--<li><a href="#!">Second Sidebar Link</a></li>-->
            <!--</ul>-->
            <!--<ul id="slide-out" class="side-nav">-->
                <!--<li><a href="#!">First Sidebar Link</a></li>-->
                <!--<li><a href="#!">Second Sidebar Link</a></li>-->
            <!--</ul>-->
            <!--<a href="#" data-activates="slide-out" class="button-collapse"><i class="mdi-navigation-menu"></i></a>-->
        <!--</nav>-->


        <div class="row">
            <div class="col m3">
                {{#each getMessageSendersForCurrentUser}}
                    <div class="message-user-link" data-id="{{this}}">
                        {{> userImage userId=this }}
                    </div>

                {{/each}}
            </div>

            <div class="col m9">
                <div class="message-area">
                    {{#each getMessage}}
                        {{> messageEntry message=this}}
                    {{/each}}
                </div>
            </div>
        </div>
    </div>


</template>


<template name="userImage">
    <div class="userImage-holder" data-id="{{userId}}">
        <a href="#" data-id="{{userId}}">
            <div class="avatar avatar-circle" data-id="{{userId}}">
                {{#if getPhotoUrlById userId}}
                    <img class="avatar-image" src="{{getPhotoUrlById userId}}" alt="avatar" data-id="{{userId}}">
                {{else}}
                    <img class="avatar-image" src="{{identicon userId}}" alt="avatar" data-id="{{userId}}">
                {{/if}}
            </div>
        </a>

        {{> simpleUserInfoById userId}}
    </div>
</template>



<template name="messageEntry">

    <div class="message-container">
        <div class="img-holder">
            <a href="/user/{{message.senderId}}">
                {{> avatar userId=message.senderId shape="circle"}}
            </a>
        </div>
        <div class="message-text">
            <small>{{formatTime message.createdTime}}:</small>
            <!--<p>{{message._id}}</p>-->
            <p>{{message.message}}</p>
        </div>
    </div>

    <!--<div class="col m3">-->
        <!--{{> simpleUserInfoById userId=message.senderId}}-->
    <!--</div>-->
    <!--<hr>-->

</template>


<!--<div class="img-holder-left-block top-margin">-->
<!--<a class="message-user-link" data-id="{{this}}" href="#">-->
<!--{{> avatar userId=this size="large" shape="circle"}}-->
<!--</a>-->
<!--</div>-->